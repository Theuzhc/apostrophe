{"_id":"cache-on-demand","_rev":"32-136c29cb4343c4204ac33548987f6e50","name":"cache-on-demand","description":"\"On demand\" caching that kicks in only when requests arrive simultaneously.","dist-tags":{"latest":"1.0.1"},"versions":{"0.1.0":{"name":"cache-on-demand","version":"0.1.0","keywords":["caching","on","demand","caching","on","demand","async","apostrophe"],"author":{"name":"P'unk Avenue LLC"},"license":"MIT","_id":"cache-on-demand@0.1.0","maintainers":[{"name":"boutell","email":"boutell@boutell.com"}],"homepage":"https://github.com/punkave/cache-on-demand","bugs":{"url":"https://github.com/punkave/cache-on-demand/issues"},"dist":{"shasum":"c28e56cc2c4f73326b882e539f5370697f804fc8","tarball":"https://registry.npmjs.org/cache-on-demand/-/cache-on-demand-0.1.0.tgz","integrity":"sha512-wvlVXtto29QC9Gf1UTii2TmrwB/tpN+ZopJGnHE/Q/4uevzkrvt2iyqv+e7MuW9j3wZyZhxmeX1P8s/f92YarA==","signatures":[{"sig":"MEUCIQD/OVgfQS2G5rdfuFPrZpcG1mIv5T+zIzTVcfS2HlTjEgIgRzZliHMwHruDF83nDCX+xKEwan1IaktMRik+kqacANQ=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}]},"main":"index.js","_from":".","_shasum":"c28e56cc2c4f73326b882e539f5370697f804fc8","gitHead":"9033bb5bab952d6359aaa88252cf1ed6e749eb11","scripts":{"test":"(cd test && mocha test)"},"_npmUser":{"name":"boutell","email":"boutell@boutell.com"},"repository":{"url":"https://github.com/punkave/cache-on-demand","type":"git"},"_npmVersion":"1.4.24","description":"\"On demand\" caching that kicks in only when requests arrive simultaneously.","directories":{"test":"test"}},"0.2.0":{"name":"cache-on-demand","version":"0.2.0","keywords":["caching","on","demand","caching","on","demand","async","apostrophe"],"author":{"name":"P'unk Avenue LLC"},"license":"MIT","_id":"cache-on-demand@0.2.0","maintainers":[{"name":"boutell","email":"boutell@boutell.com"}],"homepage":"https://github.com/punkave/cache-on-demand","bugs":{"url":"https://github.com/punkave/cache-on-demand/issues"},"dist":{"shasum":"8fa27ffca2cca76357c4ab958ee34df503069ba5","tarball":"https://registry.npmjs.org/cache-on-demand/-/cache-on-demand-0.2.0.tgz","integrity":"sha512-Fc6ekJe76ant9TnWhhOUtH7eNK+EeWJsYX9agJeAUMXK/2KxBWvIqFVdOMgjgJBcT8CJMnhflzKEj9DD2Mizsg==","signatures":[{"sig":"MEYCIQDrBSYGGg3fhi4KxML1wfsdRkYCmxjx3czHnVr8DtDUUAIhAPyX/56k4kJHZHCSs3gxLECT4TFKcNfNyyC/Xj5myU9z","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}]},"main":"index.js","_from":".","_shasum":"8fa27ffca2cca76357c4ab958ee34df503069ba5","gitHead":"e851e8d7c416a4288511028e540fe13b4f690f8b","scripts":{"test":"(cd test && mocha test)"},"_npmUser":{"name":"boutell","email":"boutell@boutell.com"},"repository":{"url":"https://github.com/punkave/cache-on-demand","type":"git"},"_npmVersion":"1.4.24","description":"\"On demand\" caching that kicks in only when requests arrive simultaneously.","directories":{"test":"test"},"dependencies":{"lodash":"^2.4.1"}},"1.0.0":{"name":"cache-on-demand","version":"1.0.0","keywords":["caching","on","demand","caching","on","demand","async","apostrophe"],"author":{"name":"P'unk Avenue LLC"},"license":"MIT","_id":"cache-on-demand@1.0.0","maintainers":[{"name":"boutell","email":"boutell@boutell.com"}],"homepage":"https://github.com/punkave/cache-on-demand","bugs":{"url":"https://github.com/punkave/cache-on-demand/issues"},"dist":{"shasum":"1f25eb2f02684757f50cc3378aac97cbc76d07fe","tarball":"https://registry.npmjs.org/cache-on-demand/-/cache-on-demand-1.0.0.tgz","integrity":"sha512-9HoPwqHF1++6N25v1RZuGCJmb6sljDeZhXFvmDNHSiDqUdZucWwnRSXlR5kHPT//U/w3zSfc8GETKCZwU5IZkA==","signatures":[{"sig":"MEQCIBHr77/dOSCPJhimwJQfKiPajT6mdOumuDZphXowtDDBAiAqciRDXTp6to72n/U4a1SP2uoUdAWWGl0+DWzqKcaZfQ==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}]},"main":"index.js","_from":".","_shasum":"1f25eb2f02684757f50cc3378aac97cbc76d07fe","gitHead":"ceeda00cf49fc9324c52cb07418a1cdbaad886f8","scripts":{"test":"(cd test && mocha test)"},"_npmUser":{"name":"boutell","email":"boutell@boutell.com"},"repository":{"url":"git+https://github.com/punkave/cache-on-demand.git","type":"git"},"_npmVersion":"3.6.0","description":"\"On demand\" caching that kicks in only when requests arrive simultaneously.","directories":{"test":"test"},"_nodeVersion":"0.10.41","dependencies":{"lodash":"^4.0.0"},"_npmOperationalInternal":{"tmp":"tmp/cache-on-demand-1.0.0.tgz_1475846826125_0.6751967037562281","host":"packages-12-west.internal.npmjs.com"}},"1.0.1":{"name":"cache-on-demand","version":"1.0.1","keywords":["caching","on","demand","caching","on","demand","async","apostrophe"],"author":{"name":"P'unk Avenue LLC"},"license":"MIT","_id":"cache-on-demand@1.0.1","maintainers":[{"name":"alexgilbert","email":"alex@apostrophecms.com"},{"name":"stuartromanek","email":"stuart@punkave.com"},{"name":"boutell","email":"tom@apostrophecms.com"},{"name":"alexbea","email":"abea@mailbox.org"},{"name":"gregvanbrug","email":"greg.vanbrug@gmail.com"},{"name":"valjed","email":"vjeudy@protonmail.com"},{"name":"romanek","email":"stuart+npm@apostrophecms.com"},{"name":"bobclewell","email":"bobclewell@gmail.com"},{"name":"austinstarin","email":"austin.starin@gmail.com"},{"name":"falkodev","email":"anthony@apostrophecms.com"},{"name":"mtthwmnc","email":"matthew.mance@gmail.com"},{"name":"breyell","email":"breyell@gmail.com"}],"homepage":"https://github.com/punkave/cache-on-demand","bugs":{"url":"https://github.com/punkave/cache-on-demand/issues"},"dist":{"shasum":"6446647bf9ce8f96e75538f41f53867d9100047e","tarball":"https://registry.npmjs.org/cache-on-demand/-/cache-on-demand-1.0.1.tgz","fileCount":7,"integrity":"sha512-iya3s70u6r8mNxU84WKO4eshC2wv2KFEH+Rrj/qxRuJFJwWt/QYYk+ypb7hPxvABQPeneNbll35ZNcF0tDp42w==","signatures":[{"sig":"MEUCIDXI0n6KL2NL5FkhbuUdiahS8iRVWHqT2HvLzPbtBPVcAiEAvIDmgCbNBIIQc4XXRtixlM+dDV2N41llkLGIKs0WBs0=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":13458,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiD8GbACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmoafxAAi8kHpzzXeNjVwC5ni8MWkN1pyweV/SYBU/6cRGVeud3FNqKO\r\nYhZuzgS861Sjg0UPAutqFV+Rbw1tODfRZSqh0KijXFsfcdSKf2new3xXctLQ\r\np21lTzahnB2ZRq4Rgl5WM9qtIdk2UicbALIZNS0tV7QiJGaCx2k6/j1Zegc7\r\nWGBIdFedyzmlSWeMEr1Nlk9D/qhMH9o2RSnIkh0quEfpmGOBQcNPUvLu5HeR\r\ncjiloGomChkPws+clEWCtdwNnLRAFJsa2I89VHypVslHGpLxOWHSt5LK2N4w\r\nXOeK8+/AX0Nz99Es8VhNuKi2ATQxVJZDK60pex1fBNL7wciF/5/LwkY1otRh\r\n2O5oaAbKRoUKIkml3zFZa0Q3ixEjYfwSbKGyYkPWNn6F6NoXy8f/yx52+ZXO\r\n8tVkNCddjtzFlJJI/3k5CELnBKZ0O3oQiQ0i9mbNUjgPDXTcuo1j3OVA1ADc\r\n9ZSgrb9YKKZOuAFSUMljmzpfXfVPHVzLwgQR8tnZUs627kOVwj1b3h++5PC0\r\nKbsOTQCUJKmYeu0LOocFcav1VdS3tshryQL5xYD6Vg52j0AOJgaunSzfVrDb\r\nUbL6VFvDmgYf6VEXtLPyETKFHZlNuTLAF+zC7EMPV9jI5s77vcHj5YYWGdQh\r\niV7/MjxREZGxizM16GLlBBfz3q4xNF6FHmw=\r\n=Ii4Y\r\n-----END PGP SIGNATURE-----\r\n"},"main":"index.js","gitHead":"5b288427cd5d8fee532ae7642ca34b42c59aa70d","scripts":{"test":"(cd test && mocha test)"},"_npmUser":{"name":"boutell","email":"tom@apostrophecms.com"},"repository":{"url":"git+https://github.com/punkave/cache-on-demand.git","type":"git"},"_npmVersion":"6.14.15","description":"\"On demand\" caching that kicks in only when requests arrive simultaneously.","directories":{"test":"test"},"_nodeVersion":"16.13.1","dependencies":{},"_hasShrinkwrap":false,"devDependencies":{"mocha":"^9.2.0","eslint":"^8.9.0","eslint-plugin-node":"^11.1.0","eslint-plugin-import":"^2.25.4","eslint-plugin-promise":"^6.0.0","eslint-config-standard":"^16.0.3","eslint-plugin-standard":"^5.0.0","eslint-config-apostrophe":"^3.4.1"},"_npmOperationalInternal":{"tmp":"tmp/cache-on-demand_1.0.1_1645199771299_0.21467591093486726","host":"s3://npm-registry-packages"}}},"time":{"created":"2014-10-17T20:59:40.192Z","modified":"2024-07-02T17:40:06.801Z","0.1.0":"2014-10-17T20:59:40.192Z","0.2.0":"2014-10-19T01:33:29.048Z","1.0.0":"2016-10-07T13:27:08.090Z","1.0.1":"2022-02-18T15:56:11.450Z"},"maintainers":[{"email":"haroun.npm@icloud.com","name":"haroun"},{"email":"robert@robertmeans.net","name":"bodonkey"},{"email":"etldev@tuta.io","name":"etlaurent"},{"email":"alex@apostrophecms.com","name":"alexgilbert"},{"email":"stuart@punkave.com","name":"stuartromanek"},{"email":"tom@apostrophecms.com","name":"boutell"},{"email":"vjeudy@protonmail.com","name":"valjed"},{"email":"stuart+npm@apostrophecms.com","name":"romanek"},{"email":"greg.vanbrug@gmail.com","name":"gregvanbrug"},{"email":"austin.starin@gmail.com","name":"austinstarin"},{"email":"anthony@apostrophecms.com","name":"falkodev"},{"email":"abea@mailbox.org","name":"alexbea"},{"email":"matthew.mance@gmail.com","name":"mtthwmnc"},{"email":"breyell@gmail.com","name":"breyell"}],"author":{"name":"P'unk Avenue LLC"},"repository":{"url":"git+https://github.com/punkave/cache-on-demand.git","type":"git"},"keywords":["caching","on","demand","caching","on","demand","async","apostrophe"],"license":"MIT","homepage":"https://github.com/punkave/cache-on-demand","bugs":{"url":"https://github.com/punkave/cache-on-demand/issues"},"readme":"# cache-on-demand\n\n<a href=\"http://apostrophenow.org/\"><img src=\"https://raw.githubusercontent.com/punkave/cache-on-demand/master/logos/logo-box-madefor.png\" align=\"right\" /></a>\n\n\"On demand\" caching that kicks in only when requests arrive simultaneously.\n\n```javascript\nvar cacheOnDemand = require('cache-on-demand');\n\n// Find all the things related to a URL.\n// Let's just say this is a slow operation.\n\nfunction getTheStuff(url, callback) {\n  return myDatabase.find({ url: url }).toArray(callback);\n}\n\n// Create a new function with on-demand caching.\n\nvar cachedGetTheStuff = cacheOnDemand(getTheStuff, function(url) {\n  // A URL makes a great hash key\n  return url;\n});\n\n// Call cachedGetTheStuff just like we'd call the original.\n\ngetTheStuff('/welcome', function(err, stuff) {\n  // Hooray, let's loop over the stuff\n});\n```\n\nUnder light load, with calls to `cachedGetTheStuff` taking place separated in time, every request for a given URL will get an individually generated response, which gives them the newest content. Just like calling `getTheStuff` directly.\n\nBut under heavy load, with new requests arriving while the first request is still being processed, the additional requests are queued up. When the first response is ready, it is simply sent to all of them. And then the response is discarded, so that the next request to arrive will generate a new response with the latest content.\n\nThis gives us \"on demand\" caching. The server is still allowed to generate new responses often, just not many of them simultaneously. It is the shortest practical lifetime for cache requests and largely eliminates concerns about users seeing old content, as well as concerns about cache memory management. In fact most users will get *fresher content than they would without the caching*, because the server is not overwhelmed and generating responses slowly.\n\n## Writing your hash function\n\nThe second argument to `cache-on-demand` is a hash function. It receives the same arguments as your original function, except for the callback.\n\nIf this call *should not be cached*, just return `false`.\n\nIf this call *should* be cached, return a string for use as a hash key. All calls with the same hash key that arrive while your worker function is running will get the same response, without calling the function again.\n\n## What about errors?\n\nIf your main function reports an error to its callback, it is reported to the original caller and all of the pending callers as well. In fact, we simply deliver *all of the same arguments* that your worker function passed to its callback.\n\n## Express middleware\n\nThere's an easy way to use this module with web apps powered by Express. Check out [express-cache-on-demand](https://github.com/punkave/express-cache-on-demand).\n\n## About P'unk Avenue and Apostrophe\n\n`cache-on-demand` was created at [P'unk Avenue](http://punkave.com) for use in many projects built with Apostrophe, an open-source content management system built on node.js. If you like `cache-on-demand` you should definitely [check out apostrophenow.org](http://apostrophenow.org).\n\n## Support\n\nFeel free to open issues on [github](http://github.com/punkave/cache-on-demand).\n\n<a href=\"http://punkave.com/\"><img src=\"https://raw.githubusercontent.com/punkave/cache-on-demand/master/logos/logo-box-builtby.png\" /></a>\n\n## Changelog\n\n### CHANGES IN 1.0.1\n\nEliminated use of `var` and introduced use of `...` to make the code more maintainable. No functional changes.\n\n### CHANGES IN 1.0.0\n\nThis has been in production use for many moons, so we're declaring 1.0.0 stable. Also bumped the dependencies up to modern releases.\n\n### CHANGES IN 0.2.0\n\nMoved all the expressly Express-related stuff to the [express-cache-on-demand](https://github.com/punkave/express-cache-on-demand) module.\n\n### CHANGES IN 0.1.0\n\nInitial release. With shiny unit tests, of course.\n","readmeFilename":"README.md"}